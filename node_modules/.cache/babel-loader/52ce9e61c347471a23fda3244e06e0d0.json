{"ast":null,"code":"function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction compose() {\n  for (var _len = arguments.length, fns = new Array(_len), _key = 0; _key < _len; _key++) {\n    fns[_key] = arguments[_key];\n  }\n\n  return function (x) {\n    return fns.reduceRight(function (y, f) {\n      return f(y);\n    }, x);\n  };\n}\n\nfunction curry(fn) {\n  return function curried() {\n    var _this = this;\n\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    return args.length >= fn.length ? fn.apply(this, args) : function () {\n      for (var _len3 = arguments.length, nextArgs = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        nextArgs[_key3] = arguments[_key3];\n      }\n\n      return curried.apply(_this, [].concat(args, nextArgs));\n    };\n  };\n}\n\nfunction isObject(value) {\n  return {}.toString.call(value).includes('Object');\n}\n\nfunction isEmpty(obj) {\n  return !Object.keys(obj).length;\n}\n\nfunction isFunction(value) {\n  return typeof value === 'function';\n}\n\nfunction hasOwnProperty(object, property) {\n  return Object.prototype.hasOwnProperty.call(object, property);\n}\n\nfunction validateChanges(initial, changes) {\n  if (!isObject(changes)) errorHandler('changeType');\n  if (Object.keys(changes).some(function (field) {\n    return !hasOwnProperty(initial, field);\n  })) errorHandler('changeField');\n  return changes;\n}\n\nfunction validateSelector(selector) {\n  if (!isFunction(selector)) errorHandler('selectorType');\n}\n\nfunction validateHandler(handler) {\n  if (!(isFunction(handler) || isObject(handler))) errorHandler('handlerType');\n  if (isObject(handler) && Object.values(handler).some(function (_handler) {\n    return !isFunction(_handler);\n  })) errorHandler('handlersType');\n}\n\nfunction validateInitial(initial) {\n  if (!initial) errorHandler('initialIsRequired');\n  if (!isObject(initial)) errorHandler('initialType');\n  if (isEmpty(initial)) errorHandler('initialContent');\n}\n\nfunction throwError(errorMessages, type) {\n  throw new Error(errorMessages[type] || errorMessages[\"default\"]);\n}\n\nvar errorMessages = {\n  initialIsRequired: 'initial state is required',\n  initialType: 'initial state should be an object',\n  initialContent: 'initial state shouldn\\'t be an empty object',\n  handlerType: 'handler should be an object or a function',\n  handlersType: 'all handlers should be a functions',\n  selectorType: 'selector should be a function',\n  changeType: 'provided value of changes should be an object',\n  changeField: 'it seams you want to change a field in the state which is not specified in the \"initial\" state',\n  \"default\": 'an unknown error accured in `state-local` package'\n};\nvar errorHandler = curry(throwError)(errorMessages);\nvar validators = {\n  changes: validateChanges,\n  selector: validateSelector,\n  handler: validateHandler,\n  initial: validateInitial\n};\n\nfunction create(initial) {\n  var handler = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  validators.initial(initial);\n  validators.handler(handler);\n  var state = {\n    current: initial\n  };\n  var didUpdate = curry(didStateUpdate)(state, handler);\n  var update = curry(updateState)(state);\n  var validate = curry(validators.changes)(initial);\n  var getChanges = curry(extractChanges)(state);\n\n  function getState() {\n    var selector = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : function (state) {\n      return state;\n    };\n    validators.selector(selector);\n    return selector(state.current);\n  }\n\n  function setState(causedChanges) {\n    compose(didUpdate, update, validate, getChanges)(causedChanges);\n  }\n\n  return [getState, setState];\n}\n\nfunction extractChanges(state, causedChanges) {\n  return isFunction(causedChanges) ? causedChanges(state.current) : causedChanges;\n}\n\nfunction updateState(state, changes) {\n  state.current = _objectSpread2(_objectSpread2({}, state.current), changes);\n  return changes;\n}\n\nfunction didStateUpdate(state, handler, changes) {\n  isFunction(handler) ? handler(state.current) : Object.keys(changes).forEach(function (field) {\n    var _handler$field;\n\n    return (_handler$field = handler[field]) === null || _handler$field === void 0 ? void 0 : _handler$field.call(handler, state.current[field]);\n  });\n  return changes;\n}\n\nvar index = {\n  create: create\n};\nexport default index;","map":{"version":3,"sources":["C:/Users/Dhruv/Downloads/projects OP/CodePlay/node_modules/state-local/lib/es/state-local.js"],"names":["_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","push","apply","_objectSpread2","target","i","arguments","length","source","forEach","getOwnPropertyDescriptors","defineProperties","compose","_len","fns","Array","_key","x","reduceRight","y","f","curry","fn","curried","_this","_len2","args","_key2","_len3","nextArgs","_key3","concat","isObject","toString","call","includes","isEmpty","isFunction","hasOwnProperty","property","prototype","validateChanges","initial","changes","errorHandler","some","field","validateSelector","selector","validateHandler","handler","values","_handler","validateInitial","throwError","errorMessages","type","Error","initialIsRequired","initialType","initialContent","handlerType","handlersType","selectorType","changeType","changeField","validators","create","undefined","state","current","didUpdate","didStateUpdate","update","updateState","validate","getChanges","extractChanges","getState","setState","causedChanges","_handler$field","index"],"mappings":"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","sourcesContent":["function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction compose() {\n  for (var _len = arguments.length, fns = new Array(_len), _key = 0; _key < _len; _key++) {\n    fns[_key] = arguments[_key];\n  }\n\n  return function (x) {\n    return fns.reduceRight(function (y, f) {\n      return f(y);\n    }, x);\n  };\n}\n\nfunction curry(fn) {\n  return function curried() {\n    var _this = this;\n\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    return args.length >= fn.length ? fn.apply(this, args) : function () {\n      for (var _len3 = arguments.length, nextArgs = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        nextArgs[_key3] = arguments[_key3];\n      }\n\n      return curried.apply(_this, [].concat(args, nextArgs));\n    };\n  };\n}\n\nfunction isObject(value) {\n  return {}.toString.call(value).includes('Object');\n}\n\nfunction isEmpty(obj) {\n  return !Object.keys(obj).length;\n}\n\nfunction isFunction(value) {\n  return typeof value === 'function';\n}\n\nfunction hasOwnProperty(object, property) {\n  return Object.prototype.hasOwnProperty.call(object, property);\n}\n\nfunction validateChanges(initial, changes) {\n  if (!isObject(changes)) errorHandler('changeType');\n  if (Object.keys(changes).some(function (field) {\n    return !hasOwnProperty(initial, field);\n  })) errorHandler('changeField');\n  return changes;\n}\n\nfunction validateSelector(selector) {\n  if (!isFunction(selector)) errorHandler('selectorType');\n}\n\nfunction validateHandler(handler) {\n  if (!(isFunction(handler) || isObject(handler))) errorHandler('handlerType');\n  if (isObject(handler) && Object.values(handler).some(function (_handler) {\n    return !isFunction(_handler);\n  })) errorHandler('handlersType');\n}\n\nfunction validateInitial(initial) {\n  if (!initial) errorHandler('initialIsRequired');\n  if (!isObject(initial)) errorHandler('initialType');\n  if (isEmpty(initial)) errorHandler('initialContent');\n}\n\nfunction throwError(errorMessages, type) {\n  throw new Error(errorMessages[type] || errorMessages[\"default\"]);\n}\n\nvar errorMessages = {\n  initialIsRequired: 'initial state is required',\n  initialType: 'initial state should be an object',\n  initialContent: 'initial state shouldn\\'t be an empty object',\n  handlerType: 'handler should be an object or a function',\n  handlersType: 'all handlers should be a functions',\n  selectorType: 'selector should be a function',\n  changeType: 'provided value of changes should be an object',\n  changeField: 'it seams you want to change a field in the state which is not specified in the \"initial\" state',\n  \"default\": 'an unknown error accured in `state-local` package'\n};\nvar errorHandler = curry(throwError)(errorMessages);\nvar validators = {\n  changes: validateChanges,\n  selector: validateSelector,\n  handler: validateHandler,\n  initial: validateInitial\n};\n\nfunction create(initial) {\n  var handler = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  validators.initial(initial);\n  validators.handler(handler);\n  var state = {\n    current: initial\n  };\n  var didUpdate = curry(didStateUpdate)(state, handler);\n  var update = curry(updateState)(state);\n  var validate = curry(validators.changes)(initial);\n  var getChanges = curry(extractChanges)(state);\n\n  function getState() {\n    var selector = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : function (state) {\n      return state;\n    };\n    validators.selector(selector);\n    return selector(state.current);\n  }\n\n  function setState(causedChanges) {\n    compose(didUpdate, update, validate, getChanges)(causedChanges);\n  }\n\n  return [getState, setState];\n}\n\nfunction extractChanges(state, causedChanges) {\n  return isFunction(causedChanges) ? causedChanges(state.current) : causedChanges;\n}\n\nfunction updateState(state, changes) {\n  state.current = _objectSpread2(_objectSpread2({}, state.current), changes);\n  return changes;\n}\n\nfunction didStateUpdate(state, handler, changes) {\n  isFunction(handler) ? handler(state.current) : Object.keys(changes).forEach(function (field) {\n    var _handler$field;\n\n    return (_handler$field = handler[field]) === null || _handler$field === void 0 ? void 0 : _handler$field.call(handler, state.current[field]);\n  });\n  return changes;\n}\n\nvar index = {\n  create: create\n};\n\nexport default index;\n"]},"metadata":{},"sourceType":"module"}